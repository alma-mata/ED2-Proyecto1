/*
 * SPI_LIB.h
 *
 * Created: 2/3/2026 10:35:04 AM
 *  Author: itzle
 */ 


#ifndef SPI_LIB_H_
#define SPI_LIB_H_

#include <avr/io.h>
#include <avr/interrupt.h>

#define	SPI_DDR		DDRB
#define SPI_PORT	PORTB
#define SPI_SS		DDB2	//PIN DEL MAESTRO
#define SPI_MOSI	DDB3
#define SPI_MISO	DDB4
#define SPI_SCK		DDB5

//TIPO MAESTRO/ESCLAVO Y DIVISOR DE FRECUENCIA
typedef enum{
	
	SPI_MASTER_DIV2 =	0b00010000,
	SPI_MASTER_DIV4 =	0b01010001,
	SPI_MASTER_DIV8 =	0b01010010,
	SPI_MASTER_DIV16 =	0b01010011,
	SPI_MASTER_DIV32 =	0b01010100,
	SPI_MASTER_DIV64 =	0b01010101,
	SPI_MASTER_DIV128 = 0b01010110,
	SPI_SLAVE		=	0b01000000	//ESCLAVO(MSTR=0)
}SPI_TYPE; 


//ORDEN DE ENVÍO DE DATOS(DORD)
typedef enum{
	
	DATA_MSB = 0b00000000,	//BITS MÁS SIGNIFICATIVOS PRIMERO(NORMAL)
	DATA_LSB = 0b00100000	//BITS MENOS SIGNIFICATIVOS PRIMERO

}SPI_ORDER;

//POLARIDAD DEL RELOJ(CPOL)
typedef enum{
	
	CLOCK_LOW  = 0b00000000,
	CLOCK_HIGH = 0b00001000
	
}CLOCK_POLARITY;

//FASE DEL RELOJ(CPHA)	
typedef enum{
	
	FIRST_EDGE = 0b00000000,	//MUESTRA EN FLANCO INICIAL
	LAST_EDGE  = 0b00000100	//MUESTRA EN FLANCO FINAL
	
}CLOCK_PHASE;

//PROTOTIPOS
void SPI_INIT(SPI_TYPE, SPI_ORDER, CLOCK_POLARITY, CLOCK_PHASE );
void SPI_WRITE(uint8_t dato);
uint8_t SPI_READ(void);
uint8_t SPI_RECEIVE_CHECK(void);

#endif /* SPI_LIB_H_ */